<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»·æ ¼æ ¼å¼åŒ–æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 40px auto;
            padding: 20px;
            background: #1a1a2e;
            color: #eee;
        }
        h1 {
            color: #00cc88;
            text-align: center;
        }
        h2 {
            color: #00cc88;
            border-bottom: 2px solid #00cc88;
            padding-bottom: 10px;
            margin-top: 40px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: #16213e;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #0f3460;
        }
        th {
            background: #0f3460;
            color: #00cc88;
        }
        .old {
            color: #ff6b6b;
        }
        .new {
            color: #00cc88;
            font-weight: bold;
        }
        .symbol {
            color: #ffd93d;
            font-weight: bold;
        }
        .note {
            background: #0f3460;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .success {
            color: #00cc88;
        }
        .error {
            color: #ff6b6b;
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ ä»·æ ¼æ ¼å¼åŒ–å·¥å…·æµ‹è¯•</h1>
    
    <div class="note">
        <strong>æµ‹è¯•è¯´æ˜ï¼š</strong> æœ¬é¡µé¢å±•ç¤ºä»·æ ¼æ ¼å¼åŒ–å·¥å…·çš„æ•ˆæœå¯¹æ¯”
        <br>â€¢ <span class="error">çº¢è‰²</span> = ä¼˜åŒ–å‰ï¼ˆç¡¬ç¼–ç ç²¾åº¦ï¼‰
        <br>â€¢ <span class="success">ç»¿è‰²</span> = ä¼˜åŒ–åï¼ˆæ™ºèƒ½ç²¾åº¦ï¼‰
    </div>

    <h2>1. ä¸åŒä»·æ ¼åŒºé—´æµ‹è¯•</h2>
    <table id="priceRangeTest">
        <thead>
            <tr>
                <th>ä»·æ ¼</th>
                <th>å¸ç§</th>
                <th>ä¼˜åŒ–å‰ (.toFixed(2))</th>
                <th>ä¼˜åŒ–å (formatPrice)</th>
                <th>è¯´æ˜</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>2. ç‰¹å®šå¸ç§æµ‹è¯•</h2>
    <table id="symbolTest">
        <thead>
            <tr>
                <th>å¸ç§</th>
                <th>ä»·æ ¼</th>
                <th>ä¼˜åŒ–å‰ (.toFixed(2))</th>
                <th>ä¼˜åŒ–å (formatPriceBySymbol)</th>
                <th>è¯´æ˜</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>3. USDT é‡‘é¢æµ‹è¯•</h2>
    <table id="usdtTest">
        <thead>
            <tr>
                <th>é‡‘é¢</th>
                <th>ä¼˜åŒ–å‰ (.toFixed(2))</th>
                <th>ä¼˜åŒ–å (formatUSDT)</th>
                <th>è¯´æ˜</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>4. ç™¾åˆ†æ¯”æµ‹è¯•</h2>
    <table id="percentTest">
        <thead>
            <tr>
                <th>æ•°å€¼</th>
                <th>ä¼˜åŒ–å‰ (.toFixed(2))</th>
                <th>ä¼˜åŒ–å (formatPercent)</th>
                <th>è¯´æ˜</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script src="price-formatter.js"></script>
    <script>
        // ä»·æ ¼åŒºé—´æµ‹è¯•æ•°æ®
        const priceRangeData = [
            { price: 45678.123, symbol: 'BTC', expected: 2, note: 'é«˜ä»·å¸' },
            { price: 2345.678, symbol: 'ETH', expected: 2, note: 'ä¸­é«˜ä»·å¸' },
            { price: 456.789, symbol: 'BNB', expected: 2, note: 'ä¸­ä»·å¸' },
            { price: 12.3456, symbol: 'LINK', expected: 4, note: 'ä¸­ä½ä»·å¸' },
            { price: 0.16234, symbol: 'DOGE', expected: 5, note: 'ä½ä»·å¸' },
            { price: 0.056789, symbol: 'TRX', expected: 5, note: 'ä½ä»·å¸' },
            { price: 0.001234, symbol: 'XEC', expected: 7, note: 'è¶…ä½ä»·å¸' },
            { price: 0.00001234, symbol: 'SHIB', expected: 8, note: 'æä½ä»·å¸' }
        ];

        // ç‰¹å®šå¸ç§æµ‹è¯•æ•°æ®
        const symbolData = [
            { symbol: 'BTC', price: 45678.123, note: 'æ¯”ç‰¹å¸' },
            { symbol: 'ETH', price: 2345.678, note: 'ä»¥å¤ªåŠ' },
            { symbol: 'DOGE', price: 0.16234, note: 'ç‹—ç‹—å¸ (é‡è¦æµ‹è¯•)' },
            { symbol: 'XRP', price: 0.56789, note: 'ç‘æ³¢å¸' },
            { symbol: 'SHIB', price: 0.00001234, note: 'æŸ´çŠ¬å¸' },
            { symbol: 'PEPE', price: 0.000001234, note: 'PEPEå¸' }
        ];

        // USDT é‡‘é¢æµ‹è¯•æ•°æ®
        const usdtData = [
            { amount: 1234.5678, note: 'å¤§é¢' },
            { amount: 123.45, note: 'ä¸­é¢' },
            { amount: 0.1234, note: 'å°é¢' },
            { amount: 0.001234, note: 'æå°é¢ (æ‰‹ç»­è´¹)' }
        ];

        // ç™¾åˆ†æ¯”æµ‹è¯•æ•°æ®
        const percentData = [
            { value: 65.123, note: 'èƒœç‡' },
            { value: 12.3456, note: 'æ”¶ç›Šç‡' },
            { value: 0.1234, note: 'å°ç™¾åˆ†æ¯”' },
            { value: 123.456, note: 'å¤§ç™¾åˆ†æ¯”' }
        ];

        // å¡«å……ä»·æ ¼åŒºé—´æµ‹è¯•è¡¨æ ¼
        const priceRangeTable = document.getElementById('priceRangeTest').querySelector('tbody');
        priceRangeData.forEach(item => {
            const row = priceRangeTable.insertRow();
            row.innerHTML = `
                <td>${item.price}</td>
                <td class="symbol">${item.symbol}</td>
                <td class="old">${item.price.toFixed(2)}</td>
                <td class="new">${formatPrice(item.price)}</td>
                <td>${item.note} (${item.expected}ä½å°æ•°)</td>
            `;
        });

        // å¡«å……ç‰¹å®šå¸ç§æµ‹è¯•è¡¨æ ¼
        const symbolTable = document.getElementById('symbolTest').querySelector('tbody');
        symbolData.forEach(item => {
            const row = symbolTable.insertRow();
            row.innerHTML = `
                <td class="symbol">${item.symbol}</td>
                <td>${item.price}</td>
                <td class="old">${item.price.toFixed(2)}</td>
                <td class="new">${formatPriceBySymbol(item.symbol, item.price)}</td>
                <td>${item.note}</td>
            `;
        });

        // å¡«å…… USDT æµ‹è¯•è¡¨æ ¼
        const usdtTable = document.getElementById('usdtTest').querySelector('tbody');
        usdtData.forEach(item => {
            const row = usdtTable.insertRow();
            row.innerHTML = `
                <td>${item.amount}</td>
                <td class="old">${item.amount.toFixed(2)}</td>
                <td class="new">${formatUSDT(item.amount, 4)}</td>
                <td>${item.note}</td>
            `;
        });

        // å¡«å……ç™¾åˆ†æ¯”æµ‹è¯•è¡¨æ ¼
        const percentTable = document.getElementById('percentTest').querySelector('tbody');
        percentData.forEach(item => {
            const row = percentTable.insertRow();
            row.innerHTML = `
                <td>${item.value}</td>
                <td class="old">${item.value.toFixed(2)}%</td>
                <td class="new">${formatPercent(item.value)}%</td>
                <td>${item.note}</td>
            `;
        });

        // æ·»åŠ æ€»ç»“
        const summary = document.createElement('div');
        summary.className = 'note';
        summary.innerHTML = `
            <h2>âœ… æµ‹è¯•æ€»ç»“</h2>
            <p><strong class="success">ä¼˜åŒ–åçš„æ•ˆæœï¼š</strong></p>
            <ul>
                <li><strong class="symbol">DOGE</strong> (0.16234) ä» <span class="error">"0.16"</span> å˜ä¸º <span class="success">"0.16234"</span> âœ…</li>
                <li><strong class="symbol">SHIB</strong> (0.00001234) ä» <span class="error">"0.00"</span> å˜ä¸º <span class="success">"0.00001234"</span> âœ…</li>
                <li><strong class="symbol">BTC</strong> (45678.123) ä¿æŒ <span class="success">"45678.12"</span> (åˆé€‚ç²¾åº¦) âœ…</li>
                <li>æ‰€æœ‰ USDT é‡‘é¢ç»Ÿä¸€ä½¿ç”¨ 2-4 ä½å°æ•° âœ…</li>
                <li>æ‰€æœ‰ç™¾åˆ†æ¯”ç»Ÿä¸€ä½¿ç”¨ 2 ä½å°æ•° âœ…</li>
            </ul>
            <p><strong class="success">æ ¸å¿ƒä»·å€¼ï¼š</strong> ä½ä»·å¸ä¸å†æ˜¾ç¤ºä¸º "0.00"ï¼Œç²¾åº¦ä¸¢å¤±é—®é¢˜å®Œå…¨è§£å†³ï¼</p>
        `;
        document.body.appendChild(summary);
    </script>
</body>
</html>
